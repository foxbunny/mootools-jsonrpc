# JSON-RPC plugin for mootools

This plugin implements the ``Request.JSONRPC`` class with a ``send`` function 
that can be used for performing [JSON-RPC](http://json-rpc.org/) calls. The 
plugin adheres supports all currently available version of the JSON-RPC 
specification, but the implementation may be partial or inaccurate in some 
cases.

## Acknowledgements

Thanks to [Arian Stolowijk](https://github.com/arian), and 
[Mark Obcena](http://keetology.com/) for great advice, code, and guidance.

## Bugs and Feature Requests

Please report all issues to the 
[issue tracker](https://github.com/foxbunny/mootools-jsonrpc/issues).

## How to Use

The JSON-RPC request is set up the same way as 
[Request.JSON](http://mootools.net/docs/core/Request/Request.JSON). Here is 
an example:

    var jsonRPCRequest = new Request.JSONRPC({
        url: 'http://example.com/services/jsonrpc',
        version: '1.1', 
        onSuccess: function(person){
            alert(person.age);    // alerts "25 years".
            alert(person.height); // alerts "170 cm".
            alert(person.weight); // alerts "120 kg".
        }}).sendRPC('sum', [1,2]);

This sends the following JSON to the server:

    {"version": "1.1", "method": "sum", "params": [1, 2], "id":"random"}
    
The ``id`` key contains a random string generated by ``String.uniqueID``. 
Assuming the server-side function ``sum`` calculates the sum of arguments
it is passed, we get the following result:

    {"version": "1.1", "error": null, id="random", "result": 3}
    
The JSON-RPC specification version can be specified using the ``rpcVersion`` 
option when creating the new ``Request.JSON`` object. 

## Known issues

Currently, the ``id`` of the response is not checked. If there is a mismatch
between the ``id`` sent to the server, and the one returned (which could be 
malicious), ``error`` even will not be triggered. This is an issue that will 
be fixed in future releases.  
